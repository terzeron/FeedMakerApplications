
















































<!DOCTYPE html>
<html lang="ko">
<head>
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<meta property="og:title" content="아담">
    <meta property="og:image" content="http://i1.cartoon.daumcdn.net/svc/image/U03/cartoon/561A2BB20248010001">
    <meta property="og:description" content="예고없이 우리를 찾아오는 위험에서 살아남는 방법은?">
        <meta property="og:site_name" content="Daum 웹툰">
    <meta property="og:url" id="ogUrl" content="http://cartoon.media.daum.net/webtoon/view/ADAM">
    <meta property="og:type" content="website">
	<title>아담 | Daum 웹툰</title>
	<link rel="shortcut icon" href="http://s1.daumcdn.net/photo-section/-cartoon10/favicon/201312/favicon.ico">
	<link href="http://s1.daumcdn.net/svc/original/U0301/cssjs/cartoon/20151109111412/common.css" type="text/css" rel="stylesheet">
	<!--[if lt IE 9]>
	<script type="text/javascript" src="http://s1.daumcdn.net/svc/original/U03/cssjs/jquery/jquery-1.11.0.min.js"></script>
	<![endif]-->
	<!--[if gte IE 9]><!-->
	<script type="text/javascript" src="http://s1.daumcdn.net/svc/original/U03/cssjs/jquery/jquery-2.1.1.min.js"></script>
	<!--<![endif]-->
	<script type="text/javascript" src="http://t1.daumcdn.net/cartoon/cssjs/underscore/underscore-1.8.3.min.js"></script>
	<script type="text/javascript" src="http://s1.daumcdn.net/svc/original/U03/cssjs/backbone/backbone-1.1.2.min.js"></script>
	<script type="text/javascript" src="http://s1.daumcdn.net/svc/original/U03/cssjs/jquery/plugin/jquery.cookie-1.4.0.min.js"></script>
	<script type="text/javascript" src="http://s1.daumcdn.net/svc/original/U03/cssjs/pcsocialshare/pcSocialshare-1.5.3.min.js"></script>
</head>
<body>
<div id="daumIndex">
	<a href="#daumGnb" rel="bookmark" class="service_bookmark">웹툰 메뉴  바로가기</a>
	<a href="#daumContent" rel="bookmark" class="service_bookmark">웹툰 내용  바로가기</a>
</div>
<!-- //daumIndex -->
<div id="daumWrap" class="daum_webtoon">
	<div id="daumHead">
		<div class="clear_g inner_head">
			<h1>
				<a href="/" id="daumServiceLogo">
					<span class="ir_wa">WEBTOON</span>
				</a>
			</h1>
			<h2 class="screen_out">웹툰 메인메뉴</h2>
			<div id="daumGnb">
				<ul class="gnb_webtoon">
					<li class="gnb_ranking">
						<a href="/ranking" class="gnb_comm">
							<span class="ir_wa">랭킹</span>
						</a>
					</li>
					<li class="gnb_league">
						<a href="/league" class="gnb_comm">
							<span class="ir_wa">웹툰리그</span>
						</a>
					</li>
					<li class="gnb_my">
						<a href="/my" class="gnb_comm">
							<span class="ir_wa">MY</span>
						</a>
					</li>
				</ul>
			</div>
			<h2 class="screen_out">최근 본 웹툰</h2>
			<div class="recent_view">
				<button type="button" class="btn_comm btn_recent">최근본</button>
				<div class="recent_layer">
					<div class="cont_recently">
						<strong class="tit_comm tit_recent">Recently viewed</strong>
						<ul id="recentList" class="list_recently"></ul>
					</div>							
				</div>
				<div class="dimmed"></div>
				<button type="button" class="btn_comm btn_close">닫기</button>
			</div>
			<h2 class="screen_out">검색</h2>
			<form action="#" class="tf_search" id="searchForm" autocomplete="off">
				<fieldset class="fld_inside">
					<legend class="screen_out">검색어 입력폼</legend>
					<div class="box_search">
						<span class="ico_comm ico_round_start"></span>
						<button type="button" class="ico_comm btn_open" id="searchOpenBtn">검색창 열기</button>
						<label class="screen_out" for="searchKeyword">검색어 입력</label><!-- input id 와 for label 값 동일하게 맞춰주세요.-->
						<input type="text" id="searchKeyword" class="inp_keyword"><!-- 입력 활성화시, class="on" 추가. -->
						<button type="button" class="btn_comm btn_delete">지우기</button>
						<button type="submit" class="ico_comm btn_search">검색</button>
						<span class="ico_comm ico_round_end"></span>
					</div>
					<div class="box_suggest" id="suggestBox">
						<ul class="list_thumb"></ul>
						<ul class="list_keyword"></ul>
						<div class="recent_search">
							<strong class="tit_recent">최근검색어</strong>
							<ul class="list_recent">
							</ul>
							<div class="group_option">
								<button type="button" class="btn_option btn_opt_off">기능끄기</button>
								<span class="ico_comm ico_bar">|</span>
								<button type="button" class="btn_option btn_opt_del">전체삭제</button>
							</div>
						</div>
						<div class="edge_bottom"></div>

					</div>
				</fieldset> 
			</form>
		</div>
	</div>
	
<div >
	<div id="SponsorBarWrap">
		<div class="bar"></div>
		<div class="obje"></div>
		<div class="tooltip"></div>
		<div class="minisite_wrap">
			<div id="ADsponsorMinisite"></div>
		</div>
	</div>
	<script src="http://display.ad.daum.net/imp?slotid=08E85" async defer></script>
</div>
	
	<!-- //daumHead -->
<script type="text/template" id="recentListTemp">
<li>
	<a href="/<%= type == 'webtoon' ? 'webtoon' : 'league' %>/viewer/<%= id %>" class="link_wt">
		<img src="<%= thumbnailImage %>" width="152" height="90" class="img_thumb" alt="<%= title + '' + episodeTitle %>">
		<span class="thumb_cover"></span>
		<strong class="tit_wt"><% if(type=='leaguetoon'){ %><span class="ico_comm ico_league">리그</span><% } else if(ageGrade==19){ %><span class="ico_comm ico_adult">성인</span><% } else if(multiType=='multi'){ %><span class="ico_comm ico_gongview">공뷰</span><% } %><%= title %></strong>
		<span class="txt_info"><%= episodeTitle %></span>
	</a>
	<button type="button" class="btn_comm btn_delete">삭제</button>
</li>
</script>
<script type="text/template" id="suggestBoxTemp">
<% var key = decodeURIComponent(key); %>
<ul class="list_thumb">
	<% _.each(list, function(item){ %>
		<% if(_.has(item, 'thumbnailImage')){ %>
		<% var matchText = item.keyword.replace(key,'<strong class="txt_match">'+key+'</strong>'); %>
			<li>
				<a href="/webtoon/view/<%= item.nickname %>" class="link_suggest">
					<img src="<%= item.thumbnailImage %>" width="64" height="46" class="img_thumb" alt="<%= item.title %>">
					<span class="thumb_cover"></span>
					<span class="desc_wt"><%= matchText %> <span class="txt_writer"><span class="screen_out">작가</span><%= item.artist %></span></span>
				</a>
			</li>
		<% } %>
	<% }) %>
</ul>
<ul class="list_keyword">
	<% _.each(list, function(item){ %>
		<% if(!_.has(item, 'thumbnailImage')){ %>
		<% var matchText = item.keyword.replace(key,'<strong class="txt_match">'+key+'</strong>'); %>
			<li>
				<a href="/search/total?q=<%= item.keyword %>" class="link_suggest"><%= matchText %></a>
			</li>
		<% } %>
	<% }) %>
</ul>
<div class="recent_search">
	<strong class="tit_recent">최근검색어</strong>
	<ul class="list_recent">
		<% _.each(recentKey,function(item){ %>
			<% if(item!=''){ %>
				<% if(recentUse=='off'){ %>
		<li style="display:none">
				<% } else { %>
		<li>
				<% } %>
			<a href="/search/total?q=<%= encodeURIComponent(item) %>" class="link_suggest"><%= item.replace(/</gi,'&lt;').replace(/>/gi,'&gt;') %></a>
			<button type="button" class="btn_comm btn_delete">삭제</button>
		</li>
			<% } %>
		<% }) %>
	</ul>
	<div class="group_option">
		<% if(recentUse=='off'){ %>
		<button type="button" class="btn_option btn_opt_on">기능켜기</button>
		<% } else { %>
		<button type="button" class="btn_option btn_opt_off">기능끄기</button>
		<% } %>
		<span class="ico_comm ico_bar">|</span>
		<button type="button" class="btn_option btn_opt_del">전체삭제</button>
	</div>
</div>
<div class="edge_bottom"></div>
</script>

<div id="daumContent">
	<h2 class="screen_out">작품 홈 본문</h2>
	<div id="cSub" class="product_intro"></div>
	<div id="cMain">
		<div class="cont_update" id="episodeList">
			<h3 class="tit_update" style="display: none">
				매주 <em class="emph_day"></em> 연재
			</h3>
			<div class="sort_comm">
				<strong class="screen_out">웹툰 정렬순서 선택</strong>
				<span class="item_radio">
					<input type="radio" id="sortRecent" name="wtsort" class="inp_radio"> 
					<label for="sortRecent" class="label_radio">최신화부터</label>
					<span class="ico_comm ico_check"></span>
				</span>
				<span class="ico_comm ico_bar"></span>
				<span class="item_radio">
					<input type="radio" id="sortOld" name="wtsort" class="inp_radio"> <label for="sortOld" class="label_radio">첫화부터</label> <span class="ico_comm ico_check"></span>
				</span>
			</div>

			<ul class="clear_g list_update"></ul>
			<div class="paging_number"></div>
		</div>
		<div class="cont_related" id="promotionContent"></div>
		<div class="cont_recommend">
			<div class="other_product" id="otherProduct"></div>
			<div class="add_banner">
				<h3 class="screen_out">프로모션 배너</h3>
				<div class="banner">
<style type="text/css">
#EXTENSIBLE_WING_WRAP {
	position: relative;
	z-index: 100;
	height: 250px;
}

#EXTENSIBLE_WING_BANNER_WRAP {
	
}

#EXTENSIBLE_WING_BANNER {
	position: relative;
	width: 250px;
	height: 0px;
	z-index: 100;
	overflow: hidden;
}

#EXTENSIBLE_WING_BANNER object {
	position: absolute;
	left: -35px;
	top: -35px;
}

#EXTENSIBLE_WING_ICON {
	display: none;
	z-index: 101;
	position: absolute;
	top: 120px;
	left: 145px;
}

#EXTENSIBLE_WING_WRAP iframe {
	position: absolute;
	top: 0;
	left: 0;
	z-index: 101;
}
</style>
					<div id="EXTENSIBLE_WING_WRAP">
						<div id="EXTENSIBLE_WING_BANNER_WRAP">
							<div id="EXTENSIBLE_WING_BANNER" class="RB"></div>
							<div id="EXTENSIBLE_WING_ICON"></div>
						</div>
						<iframe title="배너광고"
							src="http://display.ad.daum.net/imp?slotid=05d19" width="250"
							height="250" border="0" frameborder="0" scrolling="no"
							marginheight="0" marginwidth="0" id="AMS_WING_250exp"
							name="AMS_WING_250exp" allowtransparency="true"></iframe>
					</div>
				</div>
			</div>
		</div>
		<a href="#none" class="btn_comm btn_previous" style="display:none">기존 독자의견 보기</a>
		<div class="opinion_layer">
			<div class="opinion_dimmed"></div>
			<div class="inner_opinion_layer">
				<div class="layer_head">
					<strong class="tit_opinion">독자의견 <span class="num_opinion">(209)</span></strong>
				</div>
				<div class="layer_body">
					<p class="txt_expire">독자의견 게시판은 <em class="num_expire">11</em>월 <em class="num_expire">18</em>일 종료됩니다.</p>
					<iframe id="cmtFrame" src="" width="100%" height="1000" border="0" frameborder="0" scrolling="no" marginheight="0" marginwidth="0"></iframe>
					<div class="paging_number" id="cmtPaging"></div>
				</div>
				<div class="layer_foot">
					<button type="button" class="btn_comm btn_close">닫기</button>
				</div>
			</div>
		</div>
				<div class="wing_banner" id="viewWingBnr"></div>
	</div>
	<div id="cEtc">
		<div id="noticeList" class="cont_notice"></div>
		<div class="bottom_banner" id="botBnr"></div>
	</div>
</div>


<script type="text/template" id="cSubTemp">
<%
	//작품정보
	var isMulti = false;
	var genres = '';
	var isNew = false;
	var isSpecial = false;
	var commentUpdatedDate = '';
	var title = webtoon.title;

	var maxNum = 11;
	if(title.length>maxNum){
		var title1 = title.substr(0,maxNum);
		var title2 = title.substr(maxNum,title.length-maxNum);
		var position = title1.lastIndexOf(' ');
		if(position>0){
			var title3 = title1.substr(0,position) + '<br>';
		} else {
			var title3 = title1;
		};
		var title4 = title1.substr(position,maxNum-position);
		var title = title3 + title4 + title2;
	};
	_.each(webtoon.cartoon.genres, function(g){
		genres += ', <a class="link_genre" href="/search/total?q=%23'+encodeURIComponent(g.name)+'">' + g.name + '</a>';
	});
	if(webtoon.cartoon.categories.length>0){
		genres += ', <a class="link_genre" href="/search/total?q=%23'+encodeURIComponent(webtoon.cartoon.categories[0].name)+'">'+webtoon.cartoon.categories[0].name+'</a>';
	};
	genres = genres.replace(',','');
	_.each(webtoon.webtoonServices,function(service){
		if(service.serviceTarget == 'multi'){
			isMulti = true;
		} else if(service.serviceTarget == 'special'){
			isSpecial = true; 		};
	});
	var score = Math.round(webtoon.averageScore*10)/10;

	//작가정보
	var isOnly = false;
	var artist1 = webtoon.cartoon.artists[0] || '';
	var artist2 = webtoon.cartoon.artists[1] || '';

	var getHomepage = function(artistNum){
		var artistNum = artistNum || artist2;
		return _.find([artistNum.homepage],function(str){return (str!=null && str!='')});
	};
	if(artist1.id == artist2.id){
		isOnly = true;
	};
	if(artistComment){
		var updateDay = util.yyyymmddToDate(artistComment.dateCreated);
		var period = util.getPeriod(updateDay);
		commentUpdatedDate = artistComment.dateCreated.substr(0,4)+'.'+artistComment.dateCreated.substr(4,2)+'.'+artistComment.dateCreated.substr(6,2);
		if(period<7){
			isNew = true;
		};
	};

	var pcHomeImage = webtoon.pcHomeImage || webtoon.appThumbnailImage || '';
	var pcHomeRightImage = webtoon.pcHomeRightImage || {url : 'http://i1.cartoon.daumcdn.net/svc/image/U03/cartoon/5524F34C020A640002'};
	var pcHomeLeftColor = webtoon.pcHomeLeftColor || 'ea5b48';
	var pcHomeRightColor = webtoon.pcHomeRightColor || 'F27362';
%>

	<div class="product_info <% if(isMulti){ %>type_gongview<% } %>" style="background-color:#<%= pcHomeLeftColor %>">
		<div class="inner_product">
			<div class="desc_product">
				<h3 class="web_font tit_product"><%= title %></h3>
				<dl class="list_info">
					<dt class="screen_out">장르</dt>
					<dd class="txt_genre">
					<% if(isMulti){ %>
					<em class="ico_comm ico_gongview">공뷰</em>
					<% } else if(isSpecial){ %>
					<em class="ico_comm ico_campaign">캠페인</em>
					<% } %>
					 <%= genres %>
					</dd>
					<dt class="screen_out">작품 내용</dt>
					<% if(webtoon.introduction){ %>
					<dd class="txt_story"><%= webtoon.introduction.replace('&amp;amp;lt;','<').replace('&amp;amp;gt;','>') %></dd>
					<% } else { %>
					<dd class="txt_story">&nbsp;</dd>
					<% } %>
				</dl>
				<strong class="screen_out">사용자 이용 영역</strong>
				<ul class="clear_g list_append">
				<% if(!isMulti){ %>
					<li class="box_grade">
						<span class="screen_out">현재 별점</span>
						<em class="emph_grade"><%= score %></em>
						<button type="button" class="btn_comm btn_grade">별점주기</button>
						<div class="bg_comm layer_regist">
							<strong class="screen_out">아래 별점을 클릭 또는 드래그 해주세요.</strong>
							 <span class="bg_comm vote_star">
							 	<span class="bg_comm inner_star" style="width:0%"></span>
							 </span>
							<em class="num_grade">0.0</em>
						</div>
						<div class="bg_comm layer_vote">
							<p class="txt_complete">평점이 등록되었습니다.</p>
						</div>
					</li>
				<% } %>
					<li class="box_like">
						<% if(cabinetId){ %>
						<button type="button" class="btn_comm btn_like on">찜하기 취소</button>
						<div class="bg_comm layer_like">
							<p class="txt_complete">찜이 해제되었습니다.</p>
						</div>
						<% } else { %>
						<button type="button" class="btn_comm btn_like">찜하기</button>
						<div class="bg_comm layer_like">
							<p class="txt_complete">찜이 등록되었습니다.</p>
						</div>
						<% } %>
					</li>
					<li class="box_share">
						<button type="button" class="btn_comm btn_share">공유하기</button>
						<div class="layer_share">
							<div class="bg_comm inner_share">
								<strong class="tit_share">공유하기</strong>
								<span class="txt_share">친구와 함께 공유해서 보세요</span>
<style type="text/css">
.sns_comm {float:none}
.no_more .sns_comm_b .share_sns_type1 {width:auto;height:auto;text-align:center}
.sns_comm .frame_sns {float:none}
.sns_comm_b .share_sns_type1 .frame_sns .link_sns {display:inline-block;overflow:hidden;float:none;width:70px;height:70px;margin:0 6px;text-indent:0;font-size:0;line-height:0}
.sns_comm_b .frame_sns .img_g {display:none}
</style>
								<div id="socialShareContainer" class="item_btn"></div>
								<button type="button" class="btn_comm btn_close">닫기</button>
							</div>	
						</div>
					</li>
				</ul>
			</div>
			<% if(pcHomeImage!==''){ %>
			<img src="<%= pcHomeImage.url %>" width="664" height="390" class="img_thumb" alt="<%= webtoon.title %>">
			<% } %>
		</div>
	</div>
	<div class="writer_info" style="background:#<%= pcHomeRightColor %> url(<%= pcHomeRightImage.url %>) no-repeat">
		<div class="inner_writer">
			<strong class="screen_out">작가 정보</strong>
		<% if(isOnly){ %>
			<dl class="list_writerinfo">
				<dt class="screen_out">작가sns</dt>
				<dd class="writer_sns">
				<% if(artist2.email){ %>
					<a href="#none" target="_blank" class="btn_comm link_mail" data-mail="<%= artist2.email %>">메일</a>
				<% } else { %>
					<span class="btn_comm link_mail">메일</span>
				<% } %>
				<% if(_.isUndefined(getHomepage(artist2))){ %>
					<span class="btn_comm link_sns">SNS</span> 
				<% } else { %>
					<a href="<%= getHomepage() %>" target="_blank" class="btn_comm link_sns">SNS</a>
				<% } %>
					<div class="email_layer" style="display:none;left:-339px;top:102px">
						<div class="inner_email_layer inner_email_layer1">
							<div class="layer_body">
								<strong class="tit_email"><span class="bg_bar"></span>작가_이메일</strong>
								<span class="desc_email"></span>
							</div>
							<div class="layer_foot">
								<button type="button" class="btn_comm btn_close">닫기</button>
							</div>
						</div>
					</div>
				</dd>
				<dt class="screen_out">작가의 프로필 사진</dt>
				<dd class="item_profile">
					<div class="panel_profile">
						<img src="<%= artist2.pictureImage?artist2.pictureImage.url:webtoon.thumbnailImage2.url %>" width="114" height="114" class="img_profile" alt="<%= artist2.penName %> 사진">
					</div>
				</dd>
				<dt class="screen_out">작가명</dt>
				<dd class="txt_writer"><a href="/search/total?q=<%= encodeURIComponent(artist2.penName) %>" class="link_search"><%= artist2.penName %></a></dd>
				<dt class="screen_out">작가의 말</dt>
				<dd class="writer_message">
					<span class="ico_comm ico_bar"></span>
				<% if(artistComment){ %>
					<span class="inner_message">
						<a href="#none" class="link_message">
							<span class="marks_start">“</span><span class="txt_message"><%= artistComment.title %></span><span class="marks_end">”</span>
							<% if(isNew && !isArtistCommentAuth){ %>
							<em class="ico_new">new</em>
							<% } %>
						</a>
						<% if(isArtistCommentAuth){ %>
						<a href="#none" class="btn_comm link_edit">작가의 말 편집</a>
						<% } %>
					</span>
				</dd>
				<dt class="screen_out">업데이트 날짜</dt>
				<dd class="txt_date"><%= commentUpdatedDate %></dd>
				<% } else { %>
					<span class="inner_message">
						<span class="link_message">
							<span class="txt_message txt_empty">작가의 말이 없습니다.</span>
						</span>
						<% if(isArtistCommentAuth){ %>
						<a href="#none" class="btn_comm link_edit">작가의 말 편집</a>
						<% } %>
					</span>
				</dd>
				<% } %>
				<dd class="writer_mask" style="background:url(<%= pcHomeRightImage.url %>) no-repeat"></dd>
			</dl>
		<% } else { %>
			<dl class="list_writerinfo two_writer">
				<dt class="screen_out">작가sns</dt>
				<dd class="writer_sns">
					<strong class="writer_name">
						<span class="txt_writer">글: <a href="/search/total?q=<%= encodeURIComponent(artist2.penName) %>" class="link_search"><%= artist2.penName %></a></span>
					</strong>
					<% if(artist2.email){ %>
						<a href="#none" target="_blank" class="btn_comm link_mail" data-mail="<%= artist2.email %>">메일</a>
					<% } else { %>
						<span class="btn_comm link_mail">메일</span>
					<% } %>
					<% if(_.isUndefined(getHomepage(artist2))){ %>
						<span class="btn_comm link_sns">SNS</span> 
					<% } else { %>
						<a href="<%= getHomepage(artist2) %>" target="_blank" class="btn_comm link_sns">SNS</a>
					<% } %>
					<div class="email_layer" style="display:none;left:-339px;top:102px">
						<div class="inner_email_layer inner_email_layer1">
							<div class="layer_body">
								<strong class="tit_email"><span class="bg_bar"></span>작가_이메일</strong>
								<span class="desc_email"></span>
							</div>
							<div class="layer_foot">
								<button type="button" class="btn_comm btn_close">닫기</button>
							</div>
						</div>
					</div>
				</dd>
				<dd class="writer_sns">
					<strong class="writer_name">
						<span class="txt_writer">그림: <a href="/search/total?q=<%= encodeURIComponent(artist1.penName) %>" class="link_search"><%= artist1.penName %></a></span>
					</strong>
					<span class="ico_comm ico_bar"></span>
					<% if(artist1.email){ %>
						<a href="#none" target="_blank" class="btn_comm link_mail" data-mail="<%= artist1.email %>">메일</a>
					<% } else { %>
						<span class="btn_comm link_mail">메일</span>
					<% } %>
					<% if(_.isUndefined(getHomepage(artist1))){ %>
						<span class="btn_comm link_sns">SNS</span> 
					<% } else { %>
						<a href="<%= getHomepage(artist1) %>" target="_blank" class="btn_comm link_sns">SNS</a>
					<% } %>
				</dd>
				<dt class="screen_out">작가의 프로필 사진</dt>
				<dd class="item_profile">
					<div class="panel_profile">
						<div class="inner_profile" style="left:0;width:228px">
							<img src="<%= artist2.pictureImage?artist2.pictureImage.url:webtoon.thumbnailImage2.url %>" width="114" height="114" class="img_profile" alt="<%= artist2.penName %> 사진">
							<img src="<%= artist1.pictureImage?artist1.pictureImage.url:webtoon.thumbnailImage2.url %>" width="114" height="114" class="img_profile" alt="<%= artist1.penName %> 사진">
						</div>	
					</div>
					<button type="button" class="btn_comm btn_prev" style="display:none">이전 작가</button>
					<button type="button" class="btn_comm btn_next">다음 작가</button>
				</dd>
				<dt class="screen_out">작가의 말</dt>
				<dd class="writer_message">
				<% if(artistComment){ %>
					<span class="inner_message">
						<a href="#none" class="link_message">
							<span class="marks_start">“</span><span class="txt_message"><%= artistComment.title %></span><span class="marks_end">”</span>
							<% if(isNew && !isArtistCommentAuth){ %>
							<em class="ico_new">new</em>
							<% } %>
						</a>
						<% if(isArtistCommentAuth){ %>
						<a href="#none" class="btn_comm link_edit">작가의 말 편집</a>
						<% } %>
					</span>
				</dd>
				<dt class="screen_out">업데이트 날짜</dt>
				<dd class="txt_date"><%= commentUpdatedDate %></dd>
				<% } else { %>
					<span class="inner_message">
						<span class="link_message">
							<span class="txt_message txt_empty">작가의 말이 없습니다.</span>
						</span>
						<% if(isArtistCommentAuth){ %>
						<a href="#none" class="btn_comm link_edit">작가의 말 편집</a>
						<% } %>
					</span>
				</dd>
				<% } %>
				<dd class="writer_mask" style="background:url(<%= pcHomeRightImage.url %>) no-repeat"></dd>
			</dl>
		<% } %>
		</div>
		<div class="dimmed_layer edit_article" style="display:none"></div>
		<div class="layer_edit edit_article" style="display:none">
			<div class="layer_body">
				<form action="#" id="artistCommentForm">
					<fieldset>
						<legend class="screen_out">작가의 말 등록</legend>
						<div class="item_writer">
							<span class="ico_bar"></span>
							<label for="writerTitle" class="label_writer">작가의 말</label><em class="emph_limit">(20자 이내)</em>
							<span class="desc_guide">제목을 입력하세요..</span>
							<input type="text" id="writerTitle" class="inp_message inp_edit">
						</div>
						<div class="item_writer">
							<span class="ico_bar"></span>
							<label for="writerContent" class="label_writer">내용</label><em class="emph_limit">(200자 이내)</em>
							<span class="desc_guide">내용을 입력하세요..</span>
							<textarea id="writerContent" class="tf_message inp_edit" cols="30" rows="10"></textarea>
						</div>
						<div class="item_btn">
							<button type="button" class="btn_comm btn_delete">삭제</button>
							<button type="submit" class="btn_comm btn_submit">수정</button>			
						</div>
					</fieldset>
				</form>				
			</div>
			<div class="layer_foot">
				<a href="#none" class="btn_comm btn_close">닫기</a>
			</div>
		</div>
		<% if(artistComment){ %>
		<div class="layer_message">
			<div class="dimmed"></div>
			<div class="writer_message">
				<strong class="tit_message"><%= artistComment.title %></strong>
				<p class="txt_message">
					<%= artistComment.content.replace(/</gi,'&lt;').replace(/>/gi,'&gt;').replace(/\n/gi,'<br>') %>
				</p>
				<span class="txt_date"><%= commentUpdatedDate %></span>
			</div>
			<button type="button" class="btn_comm  btn_close">닫기</button><
		</div>
		<% } %>
	</div>
</script>
<script type="text/template" id="episodeListTemp">
<% 
var year = dateCreated.substr(0,4); 
var month = dateCreated.substr(4,2); 
var day = dateCreated.substr(6,2); 
var update = year + '.' + month + '.' + day;
var subWebtoonEpisodes = subWebtoonEpisodes || [];
var totalPage = Math.ceil(subWebtoonEpisodes.length/10);
var isMulti = false;
var shareCount = 0;

if(multiType == 'multi' || multiType == 'chatting'){
	isMulti = true;
};
if(isMulti && shareVoteTarget && shareVoteTarget.voteCount>0){
	shareCount = shareVoteTarget.voteCount;
};
%>
<a href="/webtoon/viewer/<%= id %>" class="link_wt">
	<img src="<%= thumbnailImage.url %>" width="186" height="112" class="img_thumb" alt="<%= title %>">
	<span class="thumb_cover"></span>
	<strong class="tit_wt"><%= title %></strong>
</a>				
<div class="desc_info">
	<% if(serviceType.indexOf('pay')>-1 && price>0){ %>
	<span class="txt_price"><span class="screen_out">가격 </span>₩<%= util.addComma(price) %></span> 
	<span class="ico_comm ico_bar">|</span>
	<% } %>
	<% if(isMulti){ %>
	<span class="txt_share">공유 <em class="emph_share"><%= shareCount %></em></span>
	<span class="ico_comm ico_bar">|</span>
	<% } %>
	<span class="txt_date"><span class="screen_out">업데이트날짜 </span><%= update %></span>
</div>

<% if(serviceType=='pay_group' && subWebtoonEpisodes.length>0){ %>
<button type="button" class="btn_comm btn_more">자세히 보기</button>
<span class="ico_comm ico_arrow"></span>
<div class="layer_more">
	<strong class="tit_series"><%= title %></strong>
	<ul class="list_series">
	<% for(var i=0;i<totalPage;i++){ %>
		<% _.each(subWebtoonEpisodes, function(sub, index){ %>
			<% if(index>=i*10 && index<i*10+10){ %>
		<li data-page="<%= i+1 %>">
			<a href="/webtoon/viewer/<%= sub.id %>" class="link_wt">
				<img src="<%= sub.thumbnailImage.url %>" width="120" height="72" alt="<%= sub.title %>">
				<%= sub.title %>
			</a>
		</li>
			<% } %>
		<% }) %>
	<% } %>
	</ul>
	<% if(subWebtoonEpisodes.length>10){ %>
	<button type="button" class="btn_comm btn_prev" style="display:none">이전</button>
	<span class="btn_comm btn_prev">이전 목록없음</span> 
	<% } %>
	<button type="button" class="btn_comm btn_close">닫기</button>
	<% if(subWebtoonEpisodes.length>10){ %>
	<button type="button" class="btn_comm btn_next">다음</button>
	<span class="btn_comm btn_next" style="display:none">다음 목록없음</span>
	<% } %>
</div>
<% } %>
</script>
<script type="text/template" id="pagingTemp">
	<span class="inner_pages">
<% if(firstPage==1){ %>
	<span class="btn_comm btn_prev">이전목록없음</span>
<% } else { %>
	<a href="#none" class="btn_comm btn_prev">이전</a>
<% } %>
<% for(var i=firstPage;(i<firstPage+5) && (i<=pageCount);i++){ %>
	<% if(nowPage==i) { %>
		<span class="screen_out">현재페이지</span>
		<em class="bg_comm link_page"><%= i %></em>
	<% } else { %>
		<a href="#none" class="link_page" data-page="<%= i %>"><%= i %></a>
	<% } %>
	<% if(!(i==firstPage+4||i==pageCount)){ %>
		<span class="txt_bar">·</span>
	<% } %>
<% } %>
<% if(firstPage+4>=pageCount){ %>
	<span class="btn_comm btn_next">다음목록없음</span>
<% } else { %>
	<a href="#none" class="btn_comm btn_next">다음</a>
<% } %>
	</span>
</script>
<script type="text/template" id="promotionContentTemp">
	<h3 class="screen_out">관련상품</h3>
		<ul class="list_related">
		<% _.each(product,function(item){ %>
			<%
				var isNew = false;
				if(util.getPeriod(util.yyyymmddToDate(item.dateCreated))<7){
					isNew = true;
				}; 
			%>
			<li>
				<a href="<%= item.url %>" class="link_thumb">
					<img src="<%= item.image.url %>" width="384" height="180" class="img_thumb" alt="<%= item.title %>">
				</a>
				<div class="info_related">
					<strong class="tit_related">
						<a href="<%= item.url %>" class="link_related"><%= item.title %></a>
						<% if(isNew){ %>
						<span class="txt_new">NEW</span>
						<% } %>
					</strong>
					<span class="txt_detail"><%= item.content %></span>
					<span class="desc_sponsor">
						<span class="txt_sponsor">제공</span> <%= item.provider %>
					</span>
					<a href="<%= item.url %>" class="btn_comm btn_move">보러가기</a>
				</div>
			</li>
		<% }) %>
		<% if(pageCount>1 && product.length==1){ %>
			<li>
				<div class="related_nodata">“관련 상품이 없습니다.”</div>
			</li>
		<% } %>
		</ul>
<%  if(product.length>2){ %>
		<div class="paging_num">
			<span class="inner_paging">
			<% if(page==1){ %>
				<span class="btn_comm btn_prev">이전 목록 없음</span>
			<% } else { %>
				<button type="button" class="btn_comm btn_prev">이전</button>
			<% } %>
		<% for(var i=0;i<pageCount;i++){ %>
			<% if(i+1==page){ %>
				<span class="screen_out">현재페이지</span>
				<em class="btn_comm num_page" data-page="<%= i+1 %>"><%= i+1 %></em>
			<% } else { %>
				<button type="button" class="btn_comm num_page" data-page="<%= i+1 %>"><%= i+1 %></button>
			<% } %>
		<% } %>
			<% if(pageCount==page){ %>
				<span class="btn_comm btn_next">다음 목록 없음</span>
			<% } else { %>
				<button type="button" class="btn_comm btn_next">다음</button>
			<% } %>
			</span>
		</div>
<% } %>
</script>
<script type="text/template" id="otherProductTemp">
<% if(anotherWebtoonType == 'recommend'){ %>
	<div class="other_nodata">
		<h3 class="tit_nodata">추천작품</h3>
		<p class="txt_nodata">"작가의 다른 작품이 없습니다. 이런 작품은 어떠세요?"</p>
	</div>	
	<ul class="list_other">
	<% _.each(data, function(item){ %>
		<li>
			<a href="/webtoon/view/<%= item.nickname %>" class="link_wt">
				<% if(item.pcThumbnailImage){ %>
				<img src="<%= item.pcThumbnailImage.url %>" width="148" height="106" class="img_thumb" alt="<%= item.title %>">
				<% } else { %>
				<img src="<%= item.thumbnailImage2.url %>" width="148" height="106" class="img_thumb" alt="<%= item.title %>">
				<% } %>
				<span class="thumb_cover"></span>
				<strong class="tit_wt"><%= item.title %></strong>
			</a>
		</li>
	<% }) %>
	</ul>
<% } else if(anotherWebtoonType == 'artist') { %>
	<h3 class="tit_other">작가의 다른작품 <span class="num_product">(<%= data.length %>)</span></h3>
	<div class="slide_other">
		<ul class="list_other" style="left:0;width:<%= 676*Math.ceil(data.length/4) %>px">
		<% _.each(data, function(item){ %>
			<li>
				<a href="/webtoon/view/<%= item.nickname %>" class="link_wt">
					<% if(item.pcThumbnailImage){ %>
					<img src="<%= item.pcThumbnailImage.url %>" width="148" height="106" class="img_thumb" alt="<%= item.title %>">
					<% } else { %>
					<img src="<%= item.thumbnailImage2.url %>" width="148" height="106" class="img_thumb" alt="<%= item.title %>">
					<% } %>
					<span class="thumb_cover"></span>
					<strong class="tit_wt"><%= item.title %></strong>
				</a>
			</li>
		<% }) %>
		</ul>
	</div>
	<% if(data.length>4){ %>
	<div class="box_btn">
		<span class="btn_comm btn_prev">이전으로</span>
		<button type="button" class="btn_comm btn_prev" style="display:none">이전으로</button>
		<span class="btn_comm btn_next" style="display:none">다음으로</span>
		<button type="button" class="btn_comm btn_next">다음으로</button>
	</div>
	<% } %>
<% } %>
</script>

<script type="text/template" id="cmtPagingTemp">
<%
	var pageLength = Math.ceil(allCount/20);
%>
<span class="inner_pages">
<% if(firstPage == 1){ %>
	<span class="btn_comm btn_prev">이전목록없음</span>
<% } else { %>
	<a href="#none" class="btn_comm btn_prev">이전</a>
<% } %>
<% for(var i=0;i<5;i++){ %>
	<% if(i+firstPage<=pageLength){ %>
		<% if(i+firstPage == nowPage){ %>
			<span class="screen_out">현재페이지</span><em class="bg_comm link_page"><%= i+firstPage %></em>
		<% } else if(i+firstPage>allCount){ %>
		<% } else if(i+firstPage+1==nowPage){ %>
			<a href="#none" class="link_page"><%= i+firstPage %></a>
		<% } else { %>
			<a href="#none" class="link_page"><%= i+firstPage %></a>
			<% if(i!=4 && i+firstPage<pageLength){ %>
				<span class="txt_bar">·</span>
			<% }; %>
		<% }; %>
	<% }; %>
<% }; %>
<% if(firstPage+4>pageLength){ %>
	<span class="btn_comm btn_next">다음목록없음</span>
<% } else { %>
	<a href="#none" class="btn_comm btn_next">다음</a>
<% } %>
</span>
</script>

<script type="text/template" id="viewWingBnrTemp">
<%
if(_.isArray(item)){
	var bnr = _.sample(item);
} else {
	var bnr = item;
};
var imgUrl = bnr.image;
%>
<a href="<%= bnr.url %>" class="link_wt">
	<img src="<%= imgUrl %>" width="110" height="234" class="img_thumb" alt="<%= bnr.title %>">
</a>	
</script>


<script type="text/javascript">
var webtoon = webtoon || {};
var webtoonModel = {};

webtoon.view = function(nickname){
	//헤더
	var headerView = new webtoon.headerView();
	var EpisodeListView;
	
	var webtoonView = Backbone.View.extend({
		el : '#daumContent',
		events : {
			'click' : function(e){
				var episodeListTop = jQuery('#episodeList').offset().top;
				var episodeListHeight = jQuery('#episodeList').height() + episodeListTop;
				if(e.target==e.currentTarget && e.pageY>episodeListTop && e.pageY<episodeListHeight){
					EpisodeListView.closeMoreList();
				};
			}
		}
	});
	new webtoonView();
	
	//작품홈 상단
	var webtoonInfoView = Backbone.View.extend({
		el : '#cSub',
		initialize : function(){
			util.showLoading();
			var that = this;
			this.model = new webtoon.model({
				url : API.view.webtoon + nickname + '?' + timeStamp,
				parse : function(data){
					return data.data;
				}
			});
			this.model.fetch({
				success : function(){
					that.renderInfo();
				},
				error : function(){
					util.hideLoading();
					alert('에러가 발생하였습니다. 다시 시도해주시기 바랍니다.');
				}
			});
		},
		renderInfo : function(){
			webtoonModel = this.model;
			var cSubTemp = _.template(jQuery('#cSubTemp').html());
			jQuery('#cSub').html(cSubTemp(this.model.toJSON()));
			EpisodeListView = new episodeListView();
			this.renderWeek();
			var isSpecial = false
			_.each(this.model.get('webtoon').webtoonServices, function(item){
				if(item.serviceTarget == 'special'){
					isSpecial = true;
				};
			});
			if(isSpecial){ //캠페인웹툰의 경우 추천작품, 기존독자의견 없음 
				jQuery('.cont_update').css('padding-bottom',40);
				jQuery('.cont_recommend').hide();
			} else if(this.model.get('webtoon').id>1250){ //신작은 기존독자의견 없음
				jQuery('.cont_recommend').css('padding-bottom',40);
				new otherProductView();
			} else {
				jQuery('.btn_previous').show();
				new otherProductView();
			};
			if(this.model.get('webtoonRelatedProducts').length > 0){
				new webtoonPromotionView();
			};
			new mainView();
			
			this.renderTitle();
			this.renderTiara();
		},
		reRender : function(){
			var that = this;
			this.model.fetch({
				success : function(data){
					var cSubTemp = _.template(jQuery('#cSubTemp').html());
					jQuery('#cSub').html(cSubTemp(data.toJSON()));
					that.renderTitle();
					that.renderSns();
				},
				error : function(){
					util.hideLoading();
					alert('에러가 발생하였습니다. 다시 시도해주시기 바랍니다.');
				}
			});
		},
		renderTitle : function(){
			if(jQuery('.tit_product').text().length>20){
				jQuery('.product_info .desc_product').addClass('max_letter');
			} else if(jQuery('.tit_product').height()>60){
				jQuery('.product_info .desc_product').addClass('two_row');
			};
		},
		renderWeek : function(){
			if(this.model.get('webtoon').finishYn=='Y'){
				jQuery('.tit_update').text('완결');
			} else if(this.model.get('webtoon').finishYn=='A'){
				jQuery('.tit_update').text('시즌완결');
			} else if(this.model.get('webtoon').weekTerm == 'biweekly'){
				jQuery('.tit_update').text('미완결');
			} else {
				var days = {mon:'월',tue:'화',wed:'수',thu:'목',fri:'금',sat:'토',sun:'일'}
				var weeks = this.model.get('webtoon').webtoonWeeks;
				var week = '';
				_.each(weeks, function(item){
					if(_.last(weeks) == item){
						week += days[item.weekDay]+'요일'
					} else {
						week += days[item.weekDay]+'요일/'
					};
				});
				jQuery('.tit_update .emph_day').text(week);
			};
			jQuery('.tit_update').show();
			this.renderSns();
		},
		renderSns : function(){
			//set Open Graph Protocol
			var toon = this.model.get('webtoon');
			var og = {
				title : toon.title + ' 작품홈 | Daum 웹툰',
				image : toon.thumbnailImage2.url,
				desc : this.model.get('webtoon').introduction,
				name : 'Daum 웹툰',
				url : 'http://webtoon.daum.net/link/view/' + toon.nickname
			};
			var ogEl = {
				title : '#ogTit',
				image : '#ogImg',
				desc : '#ogDesc',
				name : '#ogName',
				url : '#ogUrl'
			};
			_.each(og, function(value,key){
				jQuery(ogEl[key]).attr('content',value);
			});
			
			//Social Share
		    var iconEl = document.getElementById('socialShareContainer');
		    new socialshare(iconEl, {
		        shareType: 'icon',
		        link: og.url,
		        prefix: og.title,
		        useBigIcon: true,
		        callback: function (data) {
		        }
		    });
			var classNames = ['btn_story','btn_tw','btn_fb'];
			jQuery('.frame_sns .link_sns').addClass('btn_comm').each(function(i){
				jQuery(this).addClass(classNames[i]);
			});
		},
		renderTiara : function(){
			var webtoon = this.model.get('webtoon');
		},
		events : {
			'click' : function(){
				jQuery('.box_share').removeClass('open_share');
				jQuery('.email_layer').hide();
			},
			'click .btn_grade' : function(){
				var that = this;
				util.isLogin(function(isLogin){
					if(isLogin){
						that.openScoreBox();
						that.startMove = true;
					} else {
						if(confirm('로그인이 필요합니다. 로그인 페이지로 이동하시겠습니까?')){
							location.href = 'http://login.daum.net/accounts/loginform.do?daumauth=1&url='+encodeURIComponent(location.href);
						};
					};
				});
				
			},
			'mousemove .vote_star' : function(e){
				this.selectScore(e);
			},
			'mouseup .layer_regist' : function(e){
				e.stopPropagation();
				if(this.startMove){
					this.startMove = false;
					this.isZero = false;
					this.setScore();
				};
			},
			'mouseup .product_info' : function(){
				this.setZero();
			},
			'click .layer_share' : function(e){
				e.stopPropagation();
			},
			'click .list_append .btn_share' : function(e){
				e.stopPropagation();
				jQuery('.email_layer').hide();
				jQuery('.box_share').toggleClass('open_share');
			},
			'click .inner_share .btn_close' : function(){
				jQuery('.box_share').removeClass('open_share');
			},
			'click .item_profile .btn_next' : function(e){
				jQuery('.panel_profile .inner_profile').animate({left:-114})
				jQuery(e.currentTarget).hide();
				jQuery('.item_profile .btn_prev').show();
			},
			'click .item_profile .btn_prev' : function(e){
				jQuery('.panel_profile .inner_profile').animate({left:0})
				jQuery(e.currentTarget).hide();
				jQuery('.item_profile .btn_next').show();
			},
			'click .link_message' : function(e){
				e.preventDefault();
				util.autolink(jQuery('.layer_message .txt_message'));
				jQuery('.product_intro .writer_info').addClass('open_message');
			},
			'click .layer_message .btn_close' : function(e){
				e.preventDefault();
				jQuery('.product_intro .writer_info').removeClass('open_message');
			},
			'click .inner_message .link_edit' : function(e){
				e.preventDefault();
				var artistComment = this.model.get('artistComment');
				if(artistComment){
					jQuery('.edit_article .desc_guide').hide();
					jQuery('#writerTitle').val(util.unescapeHTML(artistComment.title));
					jQuery('#writerContent').val(util.unescapeHTML(artistComment.content));
				};
				jQuery('.edit_article').show();
			},
			'click .layer_edit .btn_close' : function(e){
				e.preventDefault();
				jQuery('.edit_article').hide();
			},
			'click #artistCommentForm .btn_delete' : function(e){
				var nickname = this.model.get('webtoon').nickname;
				if(confirm('작가의 말을 삭제하시겠습니까?\n(삭제 이후 복구할 수 없습니다.)')){
					jQuery.ajax({
						url : '/data/pc/webtoon/remove_artist_comment',
						method : 'POST',
						data : {
							nickname : nickname
						},
						success : function(data){
							if(data.data == 'success'){
								alert('삭제되었습니다.')
								location.reload();
							} else {
								alert('에러가 발생하였습니다. 다시 시도해주시기 바랍니다.');
							};
						}
					});
				};
			},
			'submit #artistCommentForm' : function(e){
				e.preventDefault();
				var nickname = this.model.get('webtoon').nickname;
				var title = jQuery('#writerTitle').val();
				var content = jQuery('#writerContent').val();
				if(title==''){
					alert('제목을 입력해주세요.');
					return;
				} else if(content==''){
					alert('내용을 입력해주세요.');
					return;
				} else if(content.length>200){
					alert('200자 이내로 입력해주세요.');
					return;
				};
				if(confirm('수정 하시겠습니까?')){
					jQuery.ajax({
						url : '/data/pc/webtoon/create_artist_comment',
						method : 'POST',
						data : {
							nickname : nickname,
							title : title,
							content : content
						},
						success : function(data){
							if(data.result.status=='200'){
								alert('수정되었습니다.')
								location.reload();
							} else {
								alert('에러가 발생하였습니다. 다시 시도해주시기 바랍니다.');
							};
						}
					});
				};
			},
			'focus .layer_edit .inp_edit' : function(e){
				jQuery(e.currentTarget).closest('.item_writer').find('.desc_guide').addClass('screen_out');
			},
			'click .box_like .btn_like' : function(e){
				//찜 등록/해제 
				var that = this;
				if(this.model.get('cabinetId') && !jQuery('.box_like').hasClass('like_completed')){
					util.removeCabinet(this.model.get('cabinetId'), 'cabinet', function(result){
						var result = result.result;
						if(result.status == 200){
							jQuery(e.currentTarget).removeClass('on');
							jQuery('.layer_like .txt_complete').text('찜이 해제되었습니다.');
							jQuery('.box_like').addClass('like_completed');
							that.setTime = setTimeout(function(){
								jQuery('.layer_like').animate({opacity:0}, 300, function(){
									that.reRender();
								})
							}, 1500);
						} else {
							alert(result.message);
							that.reRender();
						};
					});
				} else if(!jQuery('.box_like').hasClass('like_completed')) {
					util.addCabinet(this.model.get('webtoon').id, function(result){
						if(result.status == 200){
							jQuery(e.currentTarget).addClass('on');
							jQuery('.layer_like .txt_complete').text('찜이 등록되었습니다.');
						} else if(result.status == 100){
							jQuery('.layer_like .txt_complete').text('로그인 후 이용해주세요.');
							if(confirm('로그인이 필요합니다. 로그인 페이지로 이동하시겠습니까?')){
								location.href = 'http://login.daum.net/accounts/loginform.do?daumauth=1&url='+encodeURIComponent(location.href);
							};
						} else if(result.status == 300){
							jQuery(e.currentTarget).addClass('on');
							jQuery('.layer_like .txt_complete').text('이미 찜한 작품입니다.');
						};
						jQuery('.box_like').addClass('like_completed');
						that.setTime = setTimeout(function(){
							jQuery('.layer_like').animate({opacity:0}, 300, function(){
								that.reRender();
							})
						}, 1500);
					});
				};
			},
			'click a.link_mail' : function(e){
				e.stopPropagation();
				e.preventDefault();
				var mail = jQuery(e.currentTarget).data('mail');
				jQuery('.email_layer').show().find('.desc_email').text(' '+mail);
			},
			'click .email_layer' : function(e){
				e.stopPropagation();
			},
			'click .email_layer .btn_close' : function(){
				jQuery('.email_layer').hide();
			}
		},
		openScoreBox : function(){
			jQuery('.desc_product .list_append').addClass('open_regist');
		},
		//평점 관련 함수들 
		selectScore : function(e){
			if(this.startMove){
				var wrapOffset = jQuery(e.currentTarget).offset().left;
				var position = e.pageX - wrapOffset;
				var percent = parseInt(position*100/134);
				percent = Math.round(percent/10)*10;
				jQuery('.inner_star').width(percent+'%');
				jQuery('.box_grade .num_grade').text(percent/10+'.0');
			};
		},
		setZero : function(){
			this.isZero = true;
			this.startMove = false;
			jQuery('.inner_star').width('0%');
			jQuery('.box_grade .num_grade').text('0.0');
			jQuery('.desc_product .list_append').removeClass('open_regist');
		},
		setScore : function(){
			var that = this;
			this.startMove = false;
			var score = parseInt(jQuery('.box_grade .num_grade').text());
			
			if(this.setTime){
				clearTimeout(this.setTime);
			};
			if(score>0){
				util.doVote(this.model.get('webtoon').id, 4, score, '', function(result){
					var msg = '';
					if(result.status == -1){
						msg = '수정된 점수가 반영되었습니다.';
					} else if(result == 'login'){
						msg = '로그인 후 이용해주세요.';
					} else if(result.status == 0){
						msg = '평점이 등록되었습니다.';
					} else {
						that.setZero();
						return;
					};
					jQuery('.layer_vote').css({opacity:1}).find('.txt_complete').text(msg);
					jQuery('.desc_product .list_append').addClass('vote_completed');
					that.setTimeout = setTimeout(function(){
						jQuery('.layer_vote').animate({opacity:0}, 300, function(){
							jQuery('.list_append').removeClass('vote_completed');
						});
						if(!that.isZero){
							that.setZero();
						};
					}, 1500)
				});
			} else {
				this.startMove = true;
			};
		}
	});
	new webtoonInfoView();
	
	//회차 리스트
	var episodeItemView = Backbone.View.extend({
		tagName : 'li',
		render : function(){
			this.template = _.template(jQuery('#episodeListTemp').html());
			this.$el.html(this.template(this.model.toJSON()));
			return this;
		}
	});
	
	var episodeListView = Backbone.View.extend({
		el : '#episodeList',
		initialize : function(opt){
			if(this.opt && this.opt.pageNo==opt.pageNo && this.opt.sort==opt.sort){
				return;
			};
			
			util.hideLoading();
			util.showLoading();

			//리스트 옵션설정
			defaultOpt = {
				pageNo : 1,
				sort : 'desc'
			};
			//hash
			var hashObj = {};
			if(location.hash!=''){
				var hashArr = location.hash.replace('#','').split('&');
				_.each(hashArr, function(item){
					hashObj[item.split('=')[0]] = item.split('=')[1];
				});
			};
			
			opt = opt || {};
			this.opt = _.extend(defaultOpt, hashObj);
			_.extend(this.opt, opt);
			
			if(!(this.opt.pageNo==1 && this.opt.sort=='desc')){
				location.hash = jQuery.param(this.opt);
			};

			var episodeModel;
			this.collection = new webtoon.collection();
			_.each(webtoonModel.get('webtoon').webtoonEpisodes, function(item){
				episodeModel = new webtoon.model(item);
				this.collection.push(episodeModel);
			}, this);
			
			this.collection.pageInfo = {
				totalItemCount : this.collection.length,
				pageCount : Math.ceil(this.collection.length/15),
				firstPage : Math.ceil((this.opt.pageNo-5)/5)*5+1, 
				nowPage : this.opt.pageNo
			};

			this.render();
		},
		render : function(){
			jQuery('#episodeList .list_update').empty();
			
			var pageRange = {
				firstEpisode : (this.opt.pageNo-1)*15,
				lastEpisode : (this.opt.pageNo * 15)-1
			};
			
			jQuery('.item_radio').removeClass('on');
			jQuery('.inp_radio').prop('checked', false);
			if(this.opt.sort == 'asc'){
				this.collection.models = _.sortBy(this.collection.models, 'episode');
				jQuery('#sortOld').prop('checked', true).closest('.item_radio').addClass('on');
			} else {
				jQuery('#sortRecent').prop('checked', true).closest('.item_radio').addClass('on');
			};
			
			this.collection.each(function(model,index){
				if(index>=pageRange.firstEpisode && index<=pageRange.lastEpisode){
					var itemView;
					//유료만화(세부에피소드) 높이값 조정을 위한 class 추가 
					if(index<(pageRange.firstEpisode+5)){
						itemView = new episodeItemView({model:model,className:'line_1st'});
					} else if(index<(pageRange.firstEpisode+10)) {
						itemView = new episodeItemView({model:model,className:'line_2nd'});
					} else if(index<(pageRange.firstEpisode+15)) {
						itemView = new episodeItemView({model:model,className:'line_3rd'});
					} else {
						return;
					};
					jQuery('#episodeList .list_update').append(itemView.render().el);
				};
			});
			this.renderPage();
			util.hideLoading();
			return this;
		},
		renderPage : function(){
			var pagingTemp = _.template(jQuery('#pagingTemp').html());
			var data = {
				allCount : this.collection.length,
				firstPage : Math.ceil((this.opt.pageNo-5)/5)*5+1,
				pageCount : Math.ceil(this.collection.length/15),
				nowPage : this.opt.pageNo
			};
			jQuery('#episodeList .paging_number').html(pagingTemp(data));
		},
		goTop : function(){
			var position = jQuery('#cMain').position().top - 90;
			if(jQuery(window).scrollTop()>440){
				jQuery(window).scrollTop(position);
			};
		},
		events : {
			'click .inner_pages a.btn_next' : function(e){
				e.preventDefault();
				this.goTop();
				this.pageNo = Math.ceil((this.opt.pageNo-5)/5)*5+6;
				this.initialize({pageNo : this.pageNo});
			},
			'click .inner_pages a.btn_prev' : function(e){
				e.preventDefault();
				this.goTop();
				this.pageNo = Math.ceil((this.opt.pageNo-5)/5)*5-4;
				this.initialize({pageNo : this.pageNo});
			},
			'click .inner_pages a.link_page' : function(e){
				e.preventDefault();
				this.goTop();
				var nowPage = jQuery(e.currentTarget).data('page');
				this.initialize({pageNo : nowPage}, true);
			},
			'click .item_radio .inp_radio' : function(e){
				if(jQuery(e.currentTarget).attr('id') == 'sortRecent'){
					if(this.opt.sort!='desc'){
						location.hash = jQuery.param({pageNo:1,sort:'desc'});
						this.initialize({
							pageNo : 1,
							sort : 'desc'
						}, true)
					};
				} else {
					if(this.opt.sort!='asc'){
						this.initialize({
							pageNo : 1,
							sort : 'asc'
						}, true)
					};
				}
			},
			'click .list_update .btn_more' : function(e){
				e.preventDefault();
				if(jQuery(e.currentTarget).closest('li').hasClass('open_more')){
					this.closeMoreList(e);
				} else {
					this.openMoreList(e);
				}
			},
			'click .layer_more .btn_close' : function(){
				this.closeMoreList();
			},
			'click .layer_more button.btn_next' : function(e){
				this.subPage++;
				var parentDiv = jQuery(e.currentTarget).closest('.layer_more');
				var subPageCount = Math.ceil(parentDiv.find('.list_series li').length/10);
				this.goSubPage('next', this.subPage, subPageCount);
			},
			'click .layer_more button.btn_prev' : function(e){
				this.subPage--;
				var parentDiv = jQuery(e.currentTarget).closest('.layer_more');
				var subPageCount = Math.ceil(parentDiv.find('.list_series li').length/10);
				this.goSubPage('prev', this.subPage, subPageCount);
			}
		},
		openMoreList : function(e){
			//유료만화 세부리스트 
			this.closeMoreList();
			var targetLi = jQuery(e.currentTarget).closest('li');
			var lineClass = targetLi.attr('class');
			var positionX = targetLi.offset().left;
		
			jQuery('.'+lineClass).height(604);
			targetLi.addClass('open_more');
			targetLi.find('.layer_more').css({
				width : jQuery(window).width(),
				marginLeft : -positionX
			});
			var parentDiv = jQuery(e.currentTarget).closest('li');
			var subPageCount = Math.ceil(parentDiv.find('.list_series li').length/10);
			this.goSubPage('prev', this.subPage, subPageCount);
		},
		closeMoreList : function(){
			jQuery('.list_update li').height('').removeClass('open_more');
			jQuery('.list_update .layer_more li').hide();
			jQuery('.list_update .layer_more li[data-page=1]').show();
			this.subPage = 1;
		},
		goSubPage : function(type, nowPage, totalCount){
			jQuery('.layer_more li').hide();
			jQuery('.list_update .layer_more li[data-page='+nowPage+']').show();
			if(type=='next'){
				jQuery('.layer_more button.btn_prev').show();
				jQuery('.layer_more span.btn_prev').hide();
				if(nowPage == totalCount){
					jQuery('.layer_more button.btn_next').hide();
					jQuery('.layer_more span.btn_next').show();
				}
			} else {
				jQuery('.layer_more button.btn_next').show();
				jQuery('.layer_more span.btn_next').hide();
				if(nowPage == 1){
					jQuery('.layer_more button.btn_prev').hide();
					jQuery('.layer_more span.btn_prev').show();
				}
			};
		}
	});
	
	//관련상품
	var webtoonPromotionView = Backbone.View.extend({
		el : '#promotionContent',
		initialize : function(){
			this.model = webtoonModel;
			this.productArr = this.model.get('webtoonRelatedProducts');
			this.render();
		},
		render : function(page){
			this.page = page || 1;
			var product = {
				product : [this.productArr[this.page*2-2], this.productArr[this.page*2-1]],
				pageCount : Math.ceil(this.productArr.length/2),
				page : this.page
			};
			if(_.isUndefined(product.product[1])){
				product.product.length = 1;
			};
			this.template = _.template(jQuery('#promotionContentTemp').html());
			this.$el.html(this.template(product));
			return this;
		},
		events : {
			'click button.num_page' : function(e){
				e.preventDefault();
				this.render(jQuery(e.currentTarget).data('page'));
			},
			'click button.btn_next' : function(e){
				e.preventDefault();
				this.render(this.page+=1);
			},
			'click button.btn_prev' : function(e){
				e.preventDefault();
				this.render(this.page-=1);
			}
		}
	});
	
	//작가의 다른작품, 없을경우 추천작품 
	var otherProductView = Backbone.View.extend({
		el : '#otherProduct',
		initialize : function(){
			this.model = webtoonModel;
			this.data = {
				anotherWebtoonType : this.model.get('anotherWebtoonType'),
				data : this.model.get('anotherWebtoons')
			}
			this.render();
		},
		render : function(){
			if(this.data.anotherWebtoonType=='artist' || this.data.anotherWebtoonType=='recommend'){
				this.template = _.template(jQuery('#otherProductTemp').html());
				this.$el.html(this.template(this.data));
				this.pageCount = Math.ceil(this.model.get('anotherWebtoons').length/4);
				this.page = 1;
			};
			return this;
		},
		move : true,
		events : {
			'click .btn_next' : function(){
				if(this.page < this.pageCount){
					this.page++;
					jQuery('.slide_other .list_other').animate({'left':'-=676px'});
					jQuery('.other_product span.btn_prev').hide();
					jQuery('.other_product button.btn_prev').show();
					if(this.page == this.pageCount){
						jQuery('.other_product span.btn_next').show();
						jQuery('.other_product button.btn_next').hide();
					} else {
						jQuery('.other_product span.btn_next').hide();
						jQuery('.other_product button.btn_next').show();
					}
				};
			},
			'click .btn_prev' : function(){
				if(this.page > 1){
					this.page--;
					jQuery('.slide_other .list_other').animate({'left':'+=676px'});
					jQuery('.other_product span.btn_next').hide();
					jQuery('.other_product button.btn_next').show();
					if(this.page == 1){
						jQuery('.other_product span.btn_prev').show();
						jQuery('.other_product button.btn_prev').hide();
					} else {
						jQuery('.other_product span.btn_prev').hide();
						jQuery('.other_product button.btn_prev').show();
					}
				};
			}
		}
	});
	
	var mainView = Backbone.View.extend({
		el : '#cMain',
		firstPage : 1,
		nowPage : 1,
		initialize : function(){
			var that = this;
			
			//우날개배너
			this.renderBnr();
			//기존독자의견
			jQuery('#cmtFrame').attr('src','http://news.rhea.media.daum.net/rhea/do/cartoon/oneLineCommentList?bbsId=cartoons&articleId='+webtoonModel.get('webtoon').webtoonComment.articleId+'&cPageIndex='+this.nowPage);
			jQuery('#cmtFrame').load(function(){
				that.renderCmt();
			});
		},
		renderCmt : function(){
			var hideEl = ['.wrap_title', '.wrap_write', '.nav_category', '.wrap_reader_say_bottom'];
			var cont = jQuery('#cmtFrame').contents();
			this.allCount = this.allCount || parseInt(cont.find('.wrap_title em').text(),10);
			if(isNaN(this.allCount)){
				this.allCount = 0;
			};
			jQuery('.num_opinion').text('('+this.allCount+')')
			cont.find('.wrap_reader_say, .tbl_reader_say').css('width','100%');
			_.each(hideEl,function(el){
				cont.find(el).remove();
			});
			jQuery('#cmtFrame').height(cont.find('.tbl_reader_say').height()+1);
			this.renderPaging();
		},
		renderPaging : function(){
			var temp = _.template(jQuery('#cmtPagingTemp').html());
			var data = {
				allCount : this.allCount,
				firstPage : this.firstPage,
				nowPage : this.nowPage
			};
			jQuery('#cmtPaging').html(temp(data));
		},
		renderBnr : function(){
			var temp = _.template(jQuery('#viewWingBnrTemp').html());
			if(webtoonModel.get('eventBanners').length>0){
				jQuery('#viewWingBnr').empty().append(temp({item:webtoonModel.get('eventBanners')}));
			} else {
				jQuery.ajax({
					url : API.view.banner,
					success : function(data){
						jQuery('#viewWingBnr').empty().append(temp(data.channel));
					}
				});
			};
		},
		events : {
			'click .btn_previous' : function(e){
				e.preventDefault();
				this.initialize();
				jQuery('body').addClass('popup_on');
			},
			'click .layer_foot .btn_close' : function(){
				jQuery('body').removeClass('popup_on');
			},
			'click #cmtPaging a.link_page' : function(e){
				e.preventDefault();
				this.nowPage = jQuery(e.currentTarget).text();
				this.initialize();
			},
			'click #cmtPaging a.btn_next' : function(e){
				e.preventDefault();
				this.firstPage += 5;
				this.nowPage = this.firstPage;
				this.initialize();
			},
			'click #cmtPaging a.btn_prev' : function(e){
				e.preventDefault();
				this.firstPage -= 5;
				this.nowPage = this.firstPage;
				this.initialize();
			}
		}
	});
	
	
	jQuery(window).on('hashchange', function(){
		var hashObj = {};
		var hashArr = location.hash.replace('#','').split('&');
		_.each(hashArr, function(item){
			hashObj[item.split('=')[0]] = item.split('=')[1];
		});
		EpisodeListView.initialize(hashObj)
	});
};

//티아라
var _tiq = 'undefined' !== typeof _tiq ? _tiq : []; // Global Variables
_tiq.push(['__setSection', 'webtoon#view']);
_tiq.push(['__setPageName', 'webtoon_view']);
_tiq.push(['__trackPageview']);

jQuery(document).ready(function(){
	webtoon.view("ADAM");
});
</script>



	<!-- //daumContent -->
	
		<div id="daumFoot">
		<h2 class="screen_out">서비스 이용정보</h2>
		<div class="service_reference">
			<a href="/business" class="btn_comm link_partner">사업제휴문의</a>
			<a href="http://search.daum.net/search?w=tot&amp;DA=UME&amp;t__nil_searchbox=suggest&amp;sug=&amp;sq=%EB%8B%A4%EC%9D%8C+%EC%9B%B9%ED%88%B0%EC%95%B1&amp;o=2&amp;q=%EB%8B%A4%EC%9D%8C+%EC%9B%B9%ED%88%B0%EC%95%B1" target="_blank" class="btn_comm link_appdown">앱 다운로드</a>
		</div>	
		<div class="footer_link">
			<a href="http://www.daum.net/doc/info.html" target="_blank" class="link_info">서비스 약관/정책</a> <span class="ico_comm"></span>
			<a href="http://www.daum.net/doc/info_protection.html" target="_blank" class="link_info">개인정보취급방침</a> <span class="ico_comm"></span>
			<a href="https://cs.daum.net/redbell/right2013/right.html" target="_blank" class="link_info">권리침해신고</a> <span class="ico_comm"></span>
			<a href="http://cs.daum.net/faq/23.html" target="_blank" class="link_info">다음웹툰 고객센터</a>
		</div>
		<small class="info_copyright">
			Copyright &copy; <a href="http://kakaocorp.com" target="_blank" class="link_daumkakao" title="Kakao Corp. 바로가기">Kakao Corp.</a>   All rights reserved.
		</small>
	</div>
	<!-- //daumFoot -->
	
		
	<div id="wrapMinidaum"></div>
	<script type="text/javascript">
		var minidaum_options = {
			bgType: "dark",
			enableLogoutRetun: true,
			returnUrl: 'http://webtoon.daum.net/',
			disableHotissue: true
		}
	</script>	    
	<script src="http://go.daum.net/jsa_minidaum_pc.daum" charset="utf-8" type="text/javascript" id="minidaumJs"></script>
	
</div>
<!-- //daumWrap -->
<div class="page_loading" style="display:none" data-id="0">페이지를 로딩중입니다.</div>

<script type="text/template" id="noticeListTemp">
<div class="inner_notice">
	<h3 class="tit_notice"><a href="http://bbs.cartoon.media.daum.net/gaia/do/announce/list?bbsId=Notice" class="link_board">Notice</a></h3>
	<a href="<%= url %>" class="link_post"><%= title %></a>
	<span class="txt_date"><%= regDate %></span>
	<a href="http://bbs.cartoon.media.daum.net/gaia/do/announce/list?bbsId=Notice" class="link_more"><span class="f_l">더보기</span><span class="btn_comm"></span></a>
</div>
</script>
<script type="text/template" id="botBnrTemp">
<a href="<%= url %>" class="link_banner" style="background-color:#<%= backgroundColor %>">
	<img src="<%= image %>" width="978" height="230" class="img_banner" alt="<%= title %>">
</a>
</script>

<script src="http://s1.daumcdn.net/svc/original/U0301/cssjs/cartoon/20151109111412/common.js" type="text/javascript"></script>
<script src="http://s1.daumcdn.net/svc/original/U0301/cssjs/cartoon/20151109111412/util.js" type="text/javascript"></script>
<script type="text/javascript">
var RecentView;
jQuery(document).ready(function(){
	var scrollPosition;
	jQuery(window).scroll(function(){
		scrollPosition = jQuery(this).scrollTop();
		if (scrollPosition > 34) {
			jQuery('#daumWrap').addClass('fixed');
			jQuery('.recent_layer').css({top : 91})
		} else {
			jQuery('#daumWrap').removeClass('fixed');
			jQuery('.recent_layer').css({top : 127-scrollPosition})
		}
	});
	
	new webtoon.noticeView();
	new webtoon.botBnrView();
	RecentView = new webtoon.recentListView();
	webtoon.click();
});
</script>
</body>
</html>






